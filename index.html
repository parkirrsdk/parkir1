<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Shift App</title>
  <link rel="stylesheet" href="style-index.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="dashboard-container">
    <!-- Header Section -->
    <div class="dashboard-header">
      <div>
        <h1 class="fade-in">Dashboard Shift App</h1>
        <p id="welcome" class="slide-down"></p>
        <span id="userBadge" class="user-badge"></span>
      </div>
      <button onclick="logout()" class="btn-logout">ðŸšª Logout</button>
    </div>

    <hr>

    <!-- Menu Sections -->
    <div id="menuContainer"></div>
  </div>

  <script>
    // Check if user is logged in
    const currentUser = JSON.parse(localStorage.getItem("currentUser") || "null");
    if (!currentUser) {
      window.location.href = "login.html";
    }

    // Display welcome message
    document.getElementById("welcome").innerText = 
      `Selamat datang, ${currentUser.username}!`;
    
    document.getElementById("userBadge").innerText = 
      `ðŸ‘¤ ${currentUser.role}`;

    // Logout function
    function logout() {
      if (confirm('Apakah Anda yakin ingin keluar?')) {
        localStorage.removeItem("currentUser");
        window.location.href = "login.html";
      }
    }

    // Menu configuration based on role with categories
    const role = currentUser.role;
    const menuContainer = document.getElementById("menuContainer");

    const menuCategories = {
      IT: {
        input: [
          { icon: 'ðŸ“', text: 'Form Tukar Shift/Off', link: 'form.html' },
          { icon: 'â±ï¸', text: 'Form Lembur', link: 'form-lembur.html' },
          { icon: 'ðŸ“…', text: 'Form Ganti Hari', link: 'form-ganti-hari.html' }
        ],
        approve: [
          { icon: 'âœ…', text: 'Approve Tukar Shift/Off', link: 'list-approve.html' },
          { icon: 'âœ…', text: 'Approve Melemburkan', link: 'list-approve-lembur.html' },
          { icon: 'âœ…', text: 'Approve Ganti Hari/Off', link: 'list-approve-ganti-hari.html' }
        ],
        data: [
          { icon: 'ðŸ“Š', text: 'Data Tukar Shift/Off', link: 'list-data.html' },
          { icon: 'ðŸ“Š', text: 'Data Ganti Hari', link: 'list-data-ganti-hari.html' },
          { icon: 'ðŸ“Š', text: 'Data Melemburkan', link: 'list-data-lembur.html' }
        ],
        download: [
          { icon: 'â¬‡ï¸', text: 'Download Excel', link: 'download.html' }
        ]
      },
      CPM: {
        input: [
          { icon: 'ðŸ“', text: 'Form Tukar Shift/Off', link: 'form.html' },
          { icon: 'â±ï¸', text: 'Form Lembur', link: 'form-lembur.html' },
          { icon: 'ðŸ“…', text: 'Form Ganti Hari', link: 'form-ganti-hari.html' }
        ],
        approve: [
          { icon: 'âœ…', text: 'Approve Tukar Shift/Off', link: 'list-approve.html' },
          { icon: 'âœ…', text: 'Approve Melemburkan', link: 'list-approve-lembur.html' },
          { icon: 'âœ…', text: 'Approve Ganti Hari/Off', link: 'list-approve-ganti-hari.html' }
        ],
        data: [
          { icon: 'ðŸ“Š', text: 'Data Tukar Shift/Off', link: 'list-data.html' },
          { icon: 'ðŸ“Š', text: 'Data Ganti Hari', link: 'list-data-ganti-hari.html' },
          { icon: 'ðŸ“Š', text: 'Data Melemburkan', link: 'list-data-lembur.html' }
        ],
        download: [
          { icon: 'â¬‡ï¸', text: 'Download Excel', link: 'download.html' }
        ]
      },
      Superuser: {
        input: [
          { icon: 'ðŸ“', text: 'Form Tukar Shift/Off', link: 'form.html' },
          { icon: 'â±ï¸', text: 'Form Lembur', link: 'form-lembur.html' },
          { icon: 'ðŸ“…', text: 'Form Ganti Hari', link: 'form-ganti-hari.html' }
        ],
        approve: [
          { icon: 'âœ…', text: 'Approve Tukar Shift/Off', link: 'list-approve.html' },
          { icon: 'âœ…', text: 'Approve Melemburkan', link: 'list-approve-lembur.html' },
          { icon: 'âœ…', text: 'Approve Ganti Hari/Off', link: 'list-approve-ganti-hari.html' }
        ],
        data: [
          { icon: 'ðŸ“Š', text: 'Data Tukar Shift/Off', link: 'list-data.html' },
          { icon: 'ðŸ“Š', text: 'Data Ganti Hari', link: 'list-data-ganti-hari.html' },
          { icon: 'ðŸ“Š', text: 'Data Melemburkan', link: 'list-data-lembur.html' }
        ],
        download: [
          { icon: 'â¬‡ï¸', text: 'Download Excel', link: 'download.html' }
        ]
      },
      Admin: {
        input: [
          { icon: 'ðŸ“', text: 'Form Tukar Shift/Off', link: 'form.html' },
          { icon: 'â±ï¸', text: 'Form Lembur', link: 'form-lembur.html' },
          { icon: 'ðŸ“…', text: 'Form Ganti Hari', link: 'form-ganti-hari.html' }
        ],
        approve: [
          { icon: 'âœ…', text: 'Approve Ganti Hari/Off', link: 'list-approve-ganti-hari.html' }
        ],
        data: [
          { icon: 'ðŸ“Š', text: 'Data Tukar Shift/Off', link: 'list-data.html' },
          { icon: 'ðŸ“Š', text: 'Data Ganti Hari', link: 'list-data-ganti-hari.html' },
          { icon: 'ðŸ“Š', text: 'Data Melemburkan', link: 'list-data-lembur.html' }
        ],
        download: [
          { icon: 'â¬‡ï¸', text: 'Download Excel', link: 'download.html' }
        ]
      },
      Leader: {
        input: [
          { icon: 'ðŸ“', text: 'Form Tukar Shift/Off', link: 'form.html' },
          { icon: 'â±ï¸', text: 'Form Lembur', link: 'form-lembur.html' },
          { icon: 'ðŸ“…', text: 'Form Ganti Hari', link: 'form-ganti-hari.html' }
        ],
        approve: [
          { icon: 'âœ…', text: 'Approve Tukar Shift/Off', link: 'list-approve.html' },
          { icon: 'âœ…', text: 'Approve Melemburkan', link: 'list-approve-lembur.html' },
          { icon: 'âœ…', text: 'Approve Ganti Hari/Off', link: 'list-approve-ganti-hari.html' }
        ],
        data: [
          { icon: 'ðŸ“Š', text: 'Data Tukar Shift/Off', link: 'list-data.html' },
          { icon: 'ðŸ“Š', text: 'Data Ganti Hari', link: 'list-data-ganti-hari.html' },
          { icon: 'ðŸ“Š', text: 'Data Melemburkan', link: 'list-data-lembur.html' }
        ]
      },
      Attendance: {
        input: [
          { icon: 'ðŸ“', text: 'Form Tukar Shift/Off', link: 'form.html' },
          { icon: 'â±ï¸', text: 'Form Lembur', link: 'form-lembur.html' },
          { icon: 'ðŸ“…', text: 'Form Ganti Hari', link: 'form-ganti-hari.html' }
        ],
        data: [
          { icon: 'ðŸ“Š', text: 'Data Tukar Shift/Off', link: 'list-data.html' },
          { icon: 'ðŸ“Š', text: 'Data Ganti Hari', link: 'list-data-ganti-hari.html' },
          { icon: 'ðŸ“Š', text: 'Data Melemburkan', link: 'list-data-lembur.html' }
        ]
      }
    };

    // Category labels
    const categoryLabels = {
      input: 'ðŸ“ Input Form',
      approve: 'âœ… Persetujuan',
      data: 'ðŸ“Š Data & Laporan',
      download: 'â¬‡ï¸ Unduh'
    };

    // Render menu based on role with categories
    const userMenuCategories = menuCategories[role] || {};
    
    if (Object.keys(userMenuCategories).length > 0) {
      let htmlContent = '';
      let animationDelay = 0;

      Object.entries(userMenuCategories).forEach(([category, items]) => {
        if (items && items.length > 0) {
          htmlContent += `
            <div class="menu-section fade-in" style="animation-delay: ${animationDelay}s">
              <h2 class="section-title">${categoryLabels[category]}</h2>
              <div class="menu-grid">
                ${items.map((item, index) => `
                  <a href="${item.link}" class="menu-card" style="animation-delay: ${animationDelay + 0.1 + (index * 0.05)}s">
                    <span class="menu-icon">${item.icon}</span>
                    <span class="menu-text">${item.text}</span>
                  </a>
                `).join('')}
              </div>
            </div>
          `;
          animationDelay += 0.2;
        }
      });

      menuContainer.innerHTML = htmlContent;

      // Add fade-in animation class to menu cards
      document.querySelectorAll('.menu-card').forEach(card => {
        card.classList.add('fade-in');
      });
    } else {
      menuContainer.innerHTML = `
        <div class="empty-state">
          <div class="empty-state-icon">ðŸ”’</div>
          <h3>Tidak Ada Menu</h3>
          <p>Role Anda belum memiliki akses menu.</p>
        </div>
      `;
    }
  </script>
</body>
</html>