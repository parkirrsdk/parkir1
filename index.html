<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Dashboard Shift App</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Dashboard Shift App</h1>
    <p id="welcome"></p>
    <button onclick="logout()">Logout</button>
    <hr>
    <div id="menu"></div>
  </div>

  <script>
    const currentUser = JSON.parse(localStorage.getItem("currentUser") || "null");
    if (!currentUser) {
      window.location.href = "login.html"; // redirect kalau belum login
    }

    document.getElementById("welcome").innerText = 
      `Selamat datang, ${currentUser.username} [${currentUser.role}]`;

    function logout() {
      localStorage.removeItem("currentUser");
      window.location.href = "login.html";
    }

    // Tampilkan menu sesuai role
    const role = currentUser.role;
    const menu = document.getElementById("menu");

    // Role full akses
    if (role === "IT" || role === "CPM" || role === "Superuser") {
      menu.innerHTML = `
        <a href="form.html">Input Form</a><br>
        <a href="list-approve.html">List Approve</a><br>
        <a href="list-data.html">List Data</a><br>
        <a href="download.html">Download Excel</a>
      `;
    }

    // Admin
    if (role === "Admin") {
      menu.innerHTML = `
        <a href="form.html">Input Form</a><br>
        <a href="list-data.html">List Data</a><br>
        <a href="download.html">Download Excel</a>
      `;
    }

    // Leader
    if (role === "Leader") {
      menu.innerHTML = `
        <a href="form.html">Input Form</a><br>
        <a href="list-approve.html">List Approve</a>
      `;
    }

    // Attendance
    if (role === "Attendance") {
      menu.innerHTML = `
        <a href="form.html">Input Form</a>
      `;
    }
  </script>
</body>
</html>
